jQuery(document).ready(function(){jQuery(document).on("click","button.save-media-term",()=>{let e=jQuery(this)[0].activeElement,t=[],a=document.querySelector("input#new-tag-ftg-tags").value.replace(/  +/gi," ").replace(/\s*,\s*!/gi,",").split(",");for(let e of a)t.push(e.trim());let r={action:"save-media-terms",term_names:t,attachment_id:e.dataset.imageid,taxonomy:"ftg-tags"};document.querySelector("input#new-tag-ftg-tags").disabled,jQuery.ajax({data:r,type:"post",url:ssAjax.ajaxurl,success:e=>{let t=JSON.parse(e);console.log(t);for(let e of t)jQuery(".popup-ftg-tags ul.tagchecklist").append('<li class="ftg-term-li" data-termli="'+e.termId+'"><button type="button" id="delete-media-term-'+e.termId+'" data-termid="'+e.termId+'" data-imageid="'+r.attachment_id+'" class="delete-media-term ntdelbutton"><span class="remove-tag-icon" aria-hidden="true"></span><span class="screen-reader-text">Remove Tag: '+e.termName+"</span></button>&nbsp; "+e.termName+"</li>");0!==document.querySelector(".popup-ftg-tags ul.tagchecklist").childNodes.length&&(jQuery(".popup-ftg-tags ul.tagchecklist").show(),jQuery(".ftg-tags-none").hide()),document.querySelector("input#new-tag-ftg-tags").removeAttribute("disabled"),document.querySelector("input#new-tag-ftg-tags").value=""},error:()=>{alert("Error, please contact us at https://www.slickremix.com/support/ for help.")}})}),jQuery(document).on("click",".delete-media-term",()=>{let e=jQuery(this)[0].activeElement,t=document.querySelector('[data-termli="'+e.dataset.termid+'"]'),a=confirm('You are about to delete this tag from this image.\n\n"Cancel" to stop, "OK" to delete.');if(jQuery(".ftg-tags-none").hide(),jQuery(".popup-ftg-tags ul.tagchecklist").show(),!0!==a)return!1;jQuery.ajax({data:{action:"delete-media-term",term_id:e.dataset.termid,attachment_id:e.dataset.imageid,taxonomy:"ftg-tags"},type:"post",url:ssAjax.ajaxurl,success:e=>{t.remove(),0===document.querySelector(".popup-ftg-tags ul.tagchecklist").childNodes.length&&(jQuery(".popup-ftg-tags ul.tagchecklist").hide(),jQuery(".ftg-tags-none").show()),console.log("Tag Removed!")},error:()=>{alert("Error, please contact us at https://www.slickremix.com/support/ for help.")}})})});